import{d as z,e as w,f as ae,c as p,b as n,g as ne,h as D,v as se,i as oe,F as W,j as Y,k as q,t as f,n as H,o as v}from"./index-C8wNfR1j.js";const le={class:"text-base"},re={class:"flex flex-wrap mb-1"},ie={class:"my-2 mr-5"},ce={class:"my-2 mr-5"},de={class:"my-2"},he={class:"flex flex-wrap my-4"},ue={class:"flex flex-row items-center"},me={class:"text-left"},fe={key:0,class:"mt-3 p-2"},xe={key:0},pe={class:"font-bold"},ve={key:1},Me={__name:"color_picker",setup(ge){const S=z([{name:"00",hex:"#f8dbc7"},{name:"01",hex:"#ffdc96"},{name:"02",hex:"#ffbeaa"},{name:"03",hex:"#e68c50"},{name:"04",hex:"#d26946"},{name:"05",hex:"#903c28"},{name:"06",hex:"#ffdcbe"},{name:"07",hex:"#e6b496"},{name:"08",hex:"#a07864"},{name:"09",hex:"#503c32"},{name:"10",hex:"#fff0e6"}]),j=z([{name:"00",hex:"#282828"},{name:"01",hex:"#ffffff"},{name:"02",hex:"#804507"},{name:"03",hex:"#cd902a"},{name:"04",hex:"#942a00"},{name:"05",hex:"#ffdd20"},{name:"06",hex:"#0059ff"},{name:"07",hex:"#09a600"},{name:"08",hex:"#a128ff"},{name:"09",hex:"#ff6e80"},{name:"10",hex:"#f75700"},{name:"11",hex:"#f00011"}]),E=w("skin"),C=w(S);ae(E,a=>{a==="skin"?C.value=S:a==="hair"&&(C.value=j)});const M=w(2),c=w(null),x=w(null);function N(a){const e=a.target.files[0];if(!e)return;const t=new Image;t.onload=()=>{const r=c.value.getContext("2d",{willReadFrequently:!0}),o=t.naturalWidth,s=t.naturalHeight;c.value.width=o,c.value.height=s;const h=window.innerWidth*.6,u=window.innerHeight*.5,l=Math.min(h/o,u/s,1);c.value.style.width=o*l+"px",c.value.style.height=s*l+"px",r.drawImage(t,0,0,o,s)},t.src=URL.createObjectURL(e)}function G(a){return a=a.replace("#",""),{r:parseInt(a.slice(0,2),16),g:parseInt(a.slice(2,4),16),b:parseInt(a.slice(4,6),16)}}function P(a){return a=a/255,a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function T({r:a,g:e,b:t}){const r=P(a),o=P(e),s=P(t);return{x:(r*.4124564+o*.3575761+s*.1804375)*100,y:(r*.2126729+o*.7151522+s*.072175)*100,z:(r*.0193339+o*.119192+s*.9503041)*100}}function B({x:a,y:e,z:t}){a/=95.047,e/=100,t/=108.883;const h=d=>d>.008856?Math.cbrt(d):7.787*d+16/116,u=h(a),l=h(e),b=h(t);return{L:116*l-16,a:500*(u-l),b:200*(l-b)}}function Z(a){return B(T(G(a)))}function O(a,e,t,r,o,s){const h=(a+r)/2,u=Math.sqrt(e*e+t*t),l=Math.sqrt(o*o+s*s),b=(u+l)/2,d=.5*(1-Math.sqrt(b**7/(b**7+25**7))),y=(1+d)*e,i=(1+d)*o,m=Math.sqrt(y*y+t*t),k=Math.sqrt(i*i+s*s),_=(m+k)/2,L=(Math.atan2(t,y)*180/Math.PI+360)%360,R=(Math.atan2(s,i)*180/Math.PI+360)%360;let I=R-L;Math.abs(I)>180&&(I-=360*Math.sign(I));const F=2*Math.sqrt(m*k)*Math.sin(I/2*(Math.PI/180));let g=(L+R)/2;Math.abs(L-R)>180&&(g+=180),g%=360;const J=1-.17*Math.cos((g-30)*(Math.PI/180))+.24*Math.cos(2*g*(Math.PI/180))+.32*Math.cos((3*g+6)*(Math.PI/180))-.2*Math.cos((4*g-63)*(Math.PI/180)),K=r-a,U=k-m,Q=1+.015*(h-50)**2/Math.sqrt(20+(h-50)**2),V=1+.045*_,X=1+.015*_*J,$=30*Math.exp(-Math.pow((g-275)/25,2)),ee=2*Math.sqrt(Math.pow(_,7)/(Math.pow(_,7)+Math.pow(25,7))),te=-Math.sin(2*$*Math.PI/180)*ee;return Math.sqrt((K/Q)**2+(U/V)**2+(F/X)**2+te*(U/V)*(F/X))}function A(a){const e=c.value.getBoundingClientRect(),t=c.value.width/e.width,r=c.value.height/e.height,o=(a.clientX-e.left)*t,s=(a.clientY-e.top)*r,u=c.value.getContext("2d",{willReadFrequently:!0}).getImageData(o,s,1,1).data,l={r:u[0],g:u[1],b:u[2]},b="#"+[l.r,l.g,l.b].map(i=>i.toString(16).padStart(2,"0")).join("").toUpperCase(),d=B(T(l)),y=C.value.map(i=>{const m=Z(i.hex),k=O(d.L,d.a,d.b,m.L,m.a,m.b);return{...i,dE:k}}).filter(i=>i.dE<=M.value).sort((i,m)=>i.dE-m.dE);x.value={x:Math.round(o/t),y:Math.round(s/r),clickedHex:b,matches:y}}return(a,e)=>(v(),p("div",null,[e[8]||(e[8]=n("div",{class:"mb-2"},[n("h2",{class:"text-2xl"},"Denpa Men - Color_Picker")],-1)),n("div",le,[n("div",re,[n("div",ie,[e[2]||(e[2]=n("label",{class:"block text-sm font-medium mb-1"},"upload image",-1)),n("input",{class:"block cursor-pointer border border-gray-300 rounded-lg text-sm bg-gray-50 p-3",type:"file",onChange:N,accept:"image/*"},null,32)]),n("div",ce,[e[3]||(e[3]=n("label",{class:"block text-sm font-medium mb-1"},"ΔE2000 threshold",-1)),D(n("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>M.value=t),type:"number",step:"0.1",min:"0",class:"block cursor-pointer border border-gray-300 rounded-lg text-sm bg-gray-50 p-3"},null,512),[[se,M.value,void 0,{number:!0}]])]),n("div",de,[e[5]||(e[5]=n("label",{class:"block text-sm font-medium mb-1"},"mode",-1)),D(n("select",{"onUpdate:modelValue":e[1]||(e[1]=t=>E.value=t),class:"block cursor-pointer border border-gray-300 rounded-lg text-sm bg-gray-50 p-3"},[...e[4]||(e[4]=[n("option",{value:"skin"}," 肌色 ",-1),n("option",{value:"hair"}," 髪色 ",-1)])],512),[[oe,E.value]])])]),n("div",he,[(v(!0),p(W,null,Y(C.value,t=>(v(),p("div",{key:t.hex,class:"text-center text-xs m-2"},[n("div",ue,[n("div",{class:"inline-block w-7 h-7 border border-gray-800 align-middle mr-2",style:H({background:t.hex})},null,4),n("div",null,f(t.name),1)]),n("div",me,f(t.hex),1)]))),128))])]),n("canvas",{ref_key:"canvas",ref:c,onClick:A,class:"block cursor-crosshair border border-gray-300 max-w-full max-h-[80vh] w-auto h-auto"},null,512),x.value?(v(),p("div",fe,[n("p",null,[e[6]||(e[6]=n("span",{class:"font-bold"},"クリック座標:",-1)),q(" ("+f(x.value.x)+", "+f(x.value.y)+") ",1)]),n("p",null,[e[7]||(e[7]=q(" クリック色: ",-1)),n("span",{class:"inline-block w-7 h-4 border border-black align-middle",style:H({background:x.value.clickedHex})},null,4),q(" "+f(x.value.clickedHex),1)]),x.value.matches.length?(v(),p("div",xe,[n("p",pe,"ΔE2000 ≤ "+f(M.value)+" の近似色:",1),(v(!0),p(W,null,Y(x.value.matches,t=>(v(),p("div",{key:t.hex},[n("span",{class:"inline-block w-7 h-7 border border-gray-800 align-middle mr-1",style:H({background:t.hex})},null,4),q(" "+f(t.name)+" (ΔE="+f(t.dE.toFixed(2))+") ",1)]))),128))])):(v(),p("div",ve,[n("p",null,"ΔE"+f(M.value)+" 以下の近似色はありません。",1)]))])):ne("",!0)]))}};export{Me as default};
